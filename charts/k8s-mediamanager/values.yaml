# Default values for k8s-mediamanager.
# This is a YAML-formatted file.

#This section builds out the service account more information can be found here: https://kubernetes.io/docs/concepts/security/service-accounts/
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Alllow kubelet to automatically mount the ServiceAccount's Kubernetes API credentials?
  automount: false
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

general:
  ingress_host: k8s-mediamanager.k8s.test
  plex_ingress_host: k8s-plex.k8s.test
  #UID to run the process with
  puid: 1000
  #GID to run the process with
  pgid: 1000
  # timezone for the services
  timezone: "Etc/UTC"
  # IP family policy for services [ 'SingleStack', 'PreferDualStack', 'RequireDualStack' ]
  ipFamilyPolicy: PreferDualStack 
  # IP families for services : you can manualy specify the IP families you want to use for your services ['IPv4', 'IPv6']
  ipFamilies: []
  #media library storage and pathing configuration
  sharedStorage:
    annotations: 
      # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
      helm.sh/resource-policy: keep
    labels: {}
    accessModes: "ReadWriteMany"
    size: 5Gi
    storageClassName: "" # You need to specify the storage class that supports ReadWriteMany
    persistentVolumeClaim:
      claimName: "media-pvc"
    selector: {}
    # the paths, starting from the top level of the pv you're passing.
    subPaths:
      tv: media/tv
      movies: media/movies
      music: media/music
      downloads: downloads
  ingress:
    ingressClassName: ""

plex:
  enabled: true
  claim: "CHANGEME"
  hardwareAcceleration: false
  replicaCount: 1
  container:
    image: ghcr.io/home-operations/plex
    tag: rolling
    imagePullPolicy: Always
    nodeSelector: {}
    port: 32400
  service:
    type: ClusterIP # ClusterIP, NodePort, LoadBalancer
    port: 32400
    nodePort: # Only required if service type is NodePort
  ingress:
    enabled: true
    annotations: {}
    tls:
      enabled: false
      secretName: ""
  resources:
    requests:
      cpu: "150m"
      memory: "2Gi"
    limits:
      cpu: "4"
      memory: "16Gi"
  volume: 
    name: plex-config
    annotations: 
      # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
      helm.sh/resource-policy: keep
    accessModes: "ReadWriteOnce"
    storage: "200Gi"
    storageClassName: ""
  # We mount a memory volume to /transcode to speed up transcoding and save wear on the disk
  extraVolumes: 
    - name: plex-transcode
      emptyDir:
        sizeLimit: "14Gi"
        medium: Memory
  extraVolumeMounts:
    - name: plex-transcode
      mountPath: /transcode
  tautulli:
    enabled: true
    container:
      image: ghcr.io/tautulli/tautulli
      tag: latest
      imagePullPolicy: Always
      nodeSelector: {}
      port: 8181
    service:
      type: ClusterIP # ClusterIP, NodePort, LoadBalancer
      port: 8181
      nodePort: # Only required if service type is NodePort
    ingress:
      enabled: true
      path: /tautulli
      annotations: {}
      tls:
        enabled: false
        secretName: ""
    resources:
      requests:
        cpu: "150m"
        memory: "96Mi"
      limits:
        cpu: "250m"
        memory: "512Mi"
    volume:
      name: tautulli-config
      annotations: 
        # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
        helm.sh/resource-policy: keep
      accessModes: "ReadWriteOnce"
      storage: "10Gi"
      storageClassName: ""
    extraVolumes: {}
    extraVolumeMounts: {}


prowlarr:
  enabled: true
  # hexadecimal api key for prowlarr. Change this value before deploying to production
  apiKey: "2ed654b2c1be4f51bde5981e70687b27"
  instanceName: Prowlarr
  container:
    image: ghcr.io/home-operations/prowlarr
    tag: rolling
    imagePullPolicy: Always
    nodeSelector: {}
    port: 9696
  service:
    type: ClusterIP # ClusterIP, NodePort, LoadBalancer
    port: 9696
    nodePort: # Only required if service type is NodePort
  ingress:
    enabled: true
    annotations: {}
    path: /prowlarr
    tls:
      enabled: false
      secretName: ""
  resources:
    requests:
      cpu: "50m"
      memory: "128Mi"
    limits:
      cpu: "500m"
      memory: "1Gi"
  volume:
    name: prowlarr-config
    annotations: 
      # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
      helm.sh/resource-policy: keep
    accessModes: "ReadWriteOnce"
    storage: "10Gi"
    storageClassName: ""
  extraVolumes: {}
  extraVolumeMounts: {}
  flaresolverr:
    enabled: true
    container:
      image: ghcr.io/flaresolverr/flaresolverr
      tag: latest
      imagePullPolicy: Always
      nodeSelector: {}
      port: 8191
    service:
      type: ClusterIP # ClusterIP, NodePort, LoadBalancer
      port: 8191
      nodePort: # Only required if service type is NodePort
    resources:
      requests:
        cpu: "50m"
        memory: "128Mi"
      limits:
        cpu: "150m"
        memory: "1024Mi"
  metrics:
    image: ghcr.io/home-operations/exportarr
    imageTag: v2.0.1
    imagePullPolicy: IfNotPresent
    enabled: true
    serviceMonitor: true
    port: 9090
    flaresolvarrMetrics:
      port: 9191
    backfill: true

radarr:
  enabled: true
  # hexadecimal api key for radarr. Change this value before deploying to production
  apiKey: "6a531c2df0144dbaa270892fba460d21" 
  instanceName: Radarr
  # apiSecret: xxx
  container:
    image: ghcr.io/home-operations/radarr
    tag: rolling
    imagePullPolicy: Always
    nodeSelector: {}
    port: 7878
  service:
    type: ClusterIP # ClusterIP, NodePort, LoadBalancer
    port: 7878
    nodePort: # Only required if service type is NodePort
  ingress:
    enabled: true
    annotations: {}
    path: /radarr
    tls:
      enabled: false
      secretName: ""
  resources: 
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      cpu: "1"
      memory: "4Gi"
  volume:
    name: radarr-config
    annotations: 
      # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
      helm.sh/resource-policy: keep
    accessModes: "ReadWriteOnce"
    storage: "10Gi"
    storageClassName: ""
  extraVolumes: {}
  extraVolumeMounts: {}
  metrics:
    enabled: true
    image: ghcr.io/home-operations/exportarr
    imageTag: v2.0.1
    imagePullPolicy: IfNotPresent
    serviceMonitor: true
    port: 9090

sonarr:
  enabled: true
  # hexadecimal api key for sonarr. Change this value before deploying to production
  apiKey: "438c234cca4e4784b1eecfc12ae69f33"
  instanceName: Sonarr
  container:
    image: ghcr.io/home-operations/sonarr
    tag: rolling
    imagePullPolicy: Always
    nodeSelector: {}
    port: 8989
  service:
    type: ClusterIP # ClusterIP, NodePort, LoadBalancer
    port: 8989
    nodePort: # Only required if service type is NodePort
  ingress:
    enabled: true
    annotations: {}
    path: /sonarr
    tls:
      enabled: false
      secretName: ""
  resources: 
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      cpu: "1"
      memory: "4Gi"
  volume: 
    name: sonarr-config
    annotations: 
      # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
      helm.sh/resource-policy: keep
    accessModes: "ReadWriteOnce"
    storage: "10Gi"
    storageClassName: ""
  extraVolumes: {}
  extraVolumeMounts: {}
  metrics:
    enabled: true
    image: ghcr.io/home-operations/exportarr
    imageTag: v2.0.1
    imagePullPolicy: IfNotPresent
    serviceMonitor: true
    port: 9090

lidarr:
  enabled: true
  # hexadecimal api key for lidarr. Change this value before deploying to production
  apiKey: "438c234cca4e4784b1eabcde2ae69f33"
  instanceName: Lidarr
  container:
    image: ghcr.io/crutonjohn/lidarr-plugins
    tag: rolling
    imagePullPolicy: Always
    nodeSelector: {}
    port: 8686
  service:
    type: ClusterIP # ClusterIP, NodePort, LoadBalancer
    port: 8686
    nodePort: # Only required if service type is NodePort
  ingress:
    enabled: true
    annotations: {}
    path: /lidarr
    tls:
      enabled: false
      secretName: ""
  resources:
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      cpu: "1"
      memory: "4Gi"
  volume:
    name: lidarr-config
    annotations: 
      # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
      helm.sh/resource-policy: keep
    accessModes: "ReadWriteOnce"
    storage: "10Gi"
    storageClassName: ""
  extraVolumes: {}
  extraVolumeMounts: {}
  metrics:
    image: ghcr.io/home-operations/exportarr
    imageTag: v2.0.1
    imagePullPolicy: IfNotPresent
    enabled: true
    serviceMonitor: true
    port: 9090

transmission:
  enabled: false
  container:
    image: ghcr.io/home-operations/transmission
    tag: rolling
    imagePullPolicy: IfNotPresent
    nodeSelector: {}
    port:
      rpc: 9091
      peer: 11413
  service:
    rpc:
      type: ClusterIP   # ClusterIP, NodePort, LoadBalancer
      port: 9091
      nodePort:  # Only required if service type is NodePort
    peer:
      type: LoadBalancer   # ClusterIP, NodePort, LoadBalancer
      port: 11413       # Port for the peer service to listen on. Make sure this port is open on your cluster firewall/ingress
      nodePort:   # Only required if service type is NodePort
      nodePortUDP:  # Only required if service type is NodePort
  ingress:
    enabled: true
    annotations: {}
    path: /transmission
    tls:
      enabled: false
      secretName: ""
  config:
    auth:
      enabled: true
      username: "admin"
      password: "changeme1234"
  resources: 
    requests:
      cpu: "100m"
      memory: "320Mi"
    limits:
      cpu: "1"
      memory: "4Gi"
  volume: 
    name: transmission-config
    annotations: 
      # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
      helm.sh/resource-policy: keep
    accessModes: "ReadWriteOnce"
    storage: "1Gi"
    storageClassName: ""
  extraVolumes: {}
  extraVolumeMounts: {}
  metrics:
    enabled: true
    image: docker.io/evanofslack/transmission-exporter
    imageTag: latest
    imagePullPolicy: Always
    serviceMonitor: true
    port: 19091

qbittorrent:
  enabled: true
  container:
    image: ghcr.io/home-operations/qbittorrent
    tag: rolling
    imagePullPolicy: Always
    nodeSelector: {}
    port: 
      webui: 8080
      peer: 11413
  service:
    webui:
      type: ClusterIP   # ClusterIP, NodePort, LoadBalancer
      port: 8080
      nodePort:  # Only required if service type is NodePort
    peer:
      type: LoadBalancer   # ClusterIP, NodePort, LoadBalancer
      port: 11413       # Port for the peer service to listen on. Make sure this port is open on your cluster firewall/ingress
      nodePort:   # Only required if service type is NodePort
      nodePortUDP:  # Only required if service type is NodePort
  ingress:
    enabled: true
    annotations: {}
    path: /
    tls:
      enabled: false
      secretName: ""
  config:
    auth:
      username: "admin"
      password: "changeme1234"
  resources:
    requests:
      cpu: "500m"
      memory: "512Mi"
    limits:
      cpu: "4"
      memory: "24Gi"
  volume:
    name: qbittorrent-config
    annotations: 
      # by default the pv will not be deleted when the helm chart is uninstalled. You can change this to "delete" if you want the pv to be deleted.
      helm.sh/resource-policy: keep
    accessModes: "ReadWriteOnce"
    storage: "10Gi"
    storageClassName: ""
  extraVolumes: {}
  extraVolumeMounts: {}
  metrics:
    enabled: true
    image: ghcr.io/caseyscarborough/qbittorrent-exporter
    imageTag: v1.3.5
    imagePullPolicy: IfNotPresent
    serviceMonitor: true
    containerPort: 17871
    port: 9091
